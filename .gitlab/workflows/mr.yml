lint-title:
  interruptible: true
  rules:
    - if: $CI_PIPELINE_SOURCE == 'merge_request_event'
  script:
    - |
      if ! echo "$CI_MERGE_REQUEST_TITLE" | grep -Pq '^(build|chore|ci|doc|feat|fix|perf|refactor|revert|style|test)(\(\w+\))?!?:\s.*'; then
        echo "The title does not conform to the Conventional Commit."
        echo "Please refer to 'https://www.conventionalcommits.org/'"
        exit 1
      fi
  stage: ci
