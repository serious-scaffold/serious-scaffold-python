semantic-release:
  image:
    name: node:20.17.0@sha256:db5dd2f30cb82a8bdbd16acd4a8f3f2789f5b24f6ce43f98aa041be848c82e45
  rules:
    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH && $CI_PIPELINE_SOURCE == "push" && $CI_PROJECT_NAMESPACE == "serious-scaffold" && $CI_PROJECT_NAME == "ss-python" && $PAT != null
  script:
    - >
      npx
      --package @semantic-release/gitlab@13.2.1
      --package conventional-changelog-conventionalcommits@8.0.0
      --package semantic-release@24.1.2
      semantic-release
  stage: release
  variables:
    GITLAB_TOKEN: $PAT
